"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ContextService = void 0;
const views_1 = require("../constants/views");
const logger_1 = require("../logger/logger");
const vscodeCommandsUtils_1 = require("../vscode/vscodeCommandsUtils");
class ContextService {
    constructor() {
        this.viewContext = {};
    }
    async setContext(key, value) {
        logger_1.Logger.debug(`Snyk context ${key}: ${value}`);
        this.viewContext[key] = value;
        await (0, vscodeCommandsUtils_1.setContext)(key, value);
    }
    get isCodeInLsPreview() {
        return !!this.viewContext[views_1.SNYK_CONTEXT.LS_CODE_PREVIEW];
    }
    get shouldShowCodeAnalysis() {
        return this.shouldShowAnalysis && !!this.viewContext[views_1.SNYK_CONTEXT.CODE_ENABLED];
    }
    get shouldShowOssAnalysis() {
        return this.shouldShowAnalysis;
    }
    get shouldShowIacAnalysis() {
        return this.shouldShowAnalysis;
    }
    get shouldShowAnalysis() {
        return !this.viewContext[views_1.SNYK_CONTEXT.ERROR] && [views_1.SNYK_CONTEXT.LOGGEDIN].every(c => !!this.viewContext[c]);
    }
}
exports.ContextService = ContextService;
//# sourceMappingURL=contextService.js.map