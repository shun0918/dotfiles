"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ItlyErrorPlugin = void 0;
const ampli_1 = require("../../../ampli");
class ItlyErrorPlugin extends ampli_1.Plugin {
    constructor(logger) {
        super('snyk-itly-error-plugin');
        this.logger = logger;
    }
    postIdentify(_userId, _properties, validationResponses) {
        this.reportError(validationResponses);
    }
    postGroup(_userId, _groupId, _properties, validationResponses) {
        this.reportError(validationResponses);
    }
    postPage(_userId, _category, _name, _properties, validationResponses) {
        this.reportError(validationResponses);
    }
    postTrack(_userId, _event, validationResponses) {
        this.reportError(validationResponses);
    }
    reportError(validationResponses) {
        const errorMessage = validationResponses
            .filter(r => !r.valid)
            .map(r => r.message)
            .join('\n');
        if (errorMessage) {
            // deepcode ignore ExceptionIsNotThrown: <please specify a reason of ignoring this>
            const err = new Error(errorMessage);
            this.logger.debug(`Iteratively validation error: ${err}`);
        }
    }
}
exports.ItlyErrorPlugin = ItlyErrorPlugin;
//# sourceMappingURL=itlyErrorPlugin.js.map